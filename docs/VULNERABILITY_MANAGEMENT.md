# æ¼æ´å‘Šè­¦è™•ç†èˆ‡è‡ªå‹•åŒ–ä¿®å¾©

## æ¦‚è¿°

æœ¬æ–‡æª”èªªæ˜å¦‚ä½•åœ¨ SLASolve å°ˆæ¡ˆä¸­å¯¦æ–½ä¼æ¥­ç´šæ¼æ´ç®¡ç†ï¼ŒåŒ…æ‹¬è‡ªå‹•åŒ–å‘Šè­¦è™•ç†ã€å„ªå…ˆç´šåˆ†é¡å’Œæ™ºèƒ½ä¿®å¾©æµç¨‹ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ¼æ´å‘Šè­¦åˆ†é¡

æ ¹æ“šåš´é‡åº¦å’Œå‘Šè­¦å­˜åœ¨æ™‚é–“è‡ªå‹•åˆ†é¡ï¼š

| é¡åˆ¥ | åš´é‡åº¦ | è™•ç†æ™‚é™ | ç­–ç•¥ |
|------|--------|---------|------|
| Critical Immediate | Critical | 4 å°æ™‚ | ç«‹å³ Hotfixï¼Œè‡ªå‹•åˆä½µ |
| High Urgent | High æˆ–é€¾æœŸ 7 å¤©çš„ Moderate | 24 å°æ™‚ | å„ªå…ˆä¿®è£œï¼Œéœ€è¦å¯©æ ¸ |
| Moderate Scheduled | Moderate æˆ–é€¾æœŸ 30 å¤© | 1 é€± | æ’ç¨‹æ›´æ–°ï¼Œéœ€è¦å¯©æ ¸ |
| Low Routine | Low | 1 å€‹æœˆ | ä¾‹è¡Œç¶­è­·ï¼Œè‡ªå‹•åˆä½µ |

### 2. è‡ªå‹•åŒ–ä¿®å¾©å·¥ä½œæµç¨‹

å·¥ä½œæµç¨‹ä½æ–¼ `.github/workflows/auto-vulnerability-fix.yml`ï¼Œæä¾›ï¼š

- **æ¯æ—¥è‡ªå‹•æƒæ**: æ¯å¤©æ—©ä¸Š 8 é»è‡ªå‹•åŸ·è¡Œ
- **æ‰‹å‹•è§¸ç™¼é¸é …**: å¯è‡ªè¨‚åš´é‡åº¦é–¾å€¼å’Œè‡ªå‹•åˆä½µè¨­å®š
- **æ™ºèƒ½ PR ç®¡ç†**: è‡ªå‹•å•Ÿç”¨ Dependabot ä¸¦ç®¡ç† PR
- **è¿½è¹¤ Issue**: ç‚º Critical æ¼æ´è‡ªå‹•å»ºç«‹è¿½è¹¤ Issue
- **å®‰å…¨å ±å‘Š**: ç”Ÿæˆè©³ç´°çš„å®‰å…¨å ±å‘Š

### 3. æ¼æ´ç®¡ç†å·¥å…·

Python å·¥å…· `scripts/vulnerability-alert-handler.py` æä¾›ï¼š

- å–å¾—çµ„ç¹”æˆ–å€‰åº«çš„æ¼æ´å‘Šè­¦
- è‡ªå‹•åˆ†é¡å’Œå„ªå…ˆç´šæ’åº
- ç”Ÿæˆä¿®å¾©è¨ˆç•«
- ç”¢ç”Ÿå®‰å…¨å»ºè­°å ±å‘Š

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨

#### æª¢è¦–æ¼æ´å‘Šè­¦

```bash
# è¨­å®š GitHub Token
export GITHUB_TOKEN="your_token"

# æª¢è¦–çµ„ç¹”çš„æ‰€æœ‰æ¼æ´
./scripts/vulnerability-alert-handler.py \
  --org your-org

# æª¢è¦–ç‰¹å®šå€‰åº«çš„æ¼æ´
./scripts/vulnerability-alert-handler.py \
  --org your-org \
  --repo your-repo

# åªé¡¯ç¤º high ä»¥ä¸Šçš„æ¼æ´
./scripts/vulnerability-alert-handler.py \
  --org your-org \
  --severity-threshold high
```

#### ç”Ÿæˆå ±å‘Š

```bash
# ç”Ÿæˆ Markdown å ±å‘Š
./scripts/vulnerability-alert-handler.py \
  --org your-org \
  --output-format markdown \
  --output-file security-report.md

# ç”Ÿæˆ JSON æ ¼å¼çš„ä¿®å¾©è¨ˆç•«
./scripts/vulnerability-alert-handler.py \
  --org your-org \
  --output-format json \
  --output-file remediation-plan.json
```

### è‡ªå‹•åŒ–å·¥ä½œæµç¨‹

#### æ‰‹å‹•è§¸ç™¼ä¿®å¾©

1. å‰å¾€ GitHub Actions æ¨™ç±¤
2. é¸æ“‡ "Automated Vulnerability Remediation"
3. é»æ“Š "Run workflow"
4. é…ç½®é¸é …ï¼š
   - **severity_threshold**: æœ€ä½åš´é‡åº¦ (low/moderate/high/critical)
   - **auto_merge**: æ˜¯å¦è‡ªå‹•åˆä½µå®‰å…¨æ›´æ–°
   - **dry_run**: è©¦é‹è¡Œæ¨¡å¼ï¼ˆä¸å¯¦éš›ä¿®æ”¹ï¼‰

#### æ¯æ—¥è‡ªå‹•æƒæ

å·¥ä½œæµç¨‹æ¯å¤©æ—©ä¸Š 8 é»è‡ªå‹•åŸ·è¡Œï¼š

1. æƒææ‰€æœ‰é–‹æ”¾çš„æ¼æ´å‘Šè­¦
2. åˆ†æå’Œåˆ†é¡æ¼æ´
3. å•Ÿç”¨ Dependabot å®‰å…¨æ›´æ–°
4. å°æ–¼ Critical æ¼æ´å»ºç«‹è¿½è¹¤ Issue
5. é…ç½®è‡ªå‹•åˆä½µï¼ˆå¦‚å•Ÿç”¨ï¼‰
6. ç”Ÿæˆå®‰å…¨å ±å‘Š

## å·¥ä½œæµç¨‹è©³è§£

### æ¼æ´è©•ä¼°éšæ®µ

```yaml
vulnerability-assessment:
  # 1. å–å¾—æ¼æ´å‘Šè­¦
  # 2. æ ¹æ“šåš´é‡åº¦åˆ†é¡
  # 3. çµ±è¨ˆ Critical å’Œ High æ•¸é‡
  # 4. ç”Ÿæˆåˆ†æçµæœ JSON
```

**è¼¸å‡º**:
- `has-vulnerabilities`: æ˜¯å¦æœ‰æ¼æ´
- `critical-count`: Critical ç´šåˆ¥æ•¸é‡
- `high-count`: High ç´šåˆ¥æ•¸é‡

### Dependabot å•Ÿç”¨

```yaml
enable-dependabot:
  # ç¢ºä¿ Dependabot å®‰å…¨æ›´æ–°å·²å•Ÿç”¨
  # åªåœ¨ç™¼ç¾æ¼æ´æ™‚åŸ·è¡Œ
```

### ä¿®å¾© PR å»ºç«‹

```yaml
create-remediation-prs:
  # 1. è§¸ç™¼ Dependabot æ›´æ–°
  # 2. åˆ—å‡ºå—å½±éŸ¿çš„å¥—ä»¶
  # 3. ç‚º Critical æ¼æ´å»ºç«‹è¿½è¹¤ Issue
```

**è¿½è¹¤ Issue å…§å®¹**:
- æ¼æ´æ‘˜è¦çµ±è¨ˆ
- è‡ªå‹•åŒ–å‹•ä½œæ¸…å–®
- å¾ŒçºŒæ­¥é©ŸæŒ‡å¼•
- SLA ç›®æ¨™æ™‚é–“

### è‡ªå‹•åˆä½µ

```yaml
auto-merge-safe-updates:
  # 1. å–å¾—æ‰€æœ‰ Dependabot PR
  # 2. è­˜åˆ¥å®‰å…¨çš„æ›´æ–°ï¼ˆpatch/minorï¼‰
  # 3. å•Ÿç”¨è‡ªå‹•åˆä½µ
  # 4. è·³é major æ›´æ–°
```

**è‡ªå‹•åˆä½µè¦å‰‡**:
- âœ… Patch ç‰ˆæœ¬æ›´æ–°
- âœ… Minor ç‰ˆæœ¬æ›´æ–°
- âŒ Major ç‰ˆæœ¬æ›´æ–°ï¼ˆéœ€è¦æ‰‹å‹•å¯©æ ¸ï¼‰

### å ±å‘Šç”Ÿæˆ

```yaml
generate-report:
  # 1. ç”Ÿæˆè©³ç´°çš„å®‰å…¨å ±å‘Š
  # 2. ä¸Šå‚³ç‚º artifact
  # 3. åœ¨ Summary ä¸­é¡¯ç¤ºæ‘˜è¦
```

## æ¼æ´è™•ç†æµç¨‹

### Critical æ¼æ´è™•ç†

```mermaid
graph TD
    A[æª¢æ¸¬åˆ° Critical æ¼æ´] --> B[ç«‹å³å»ºç«‹è¿½è¹¤ Issue]
    B --> C[é€šçŸ¥å®‰å…¨åœ˜éšŠ]
    C --> D[Dependabot å»ºç«‹ PR]
    D --> E{CI é€šé?}
    E -->|æ˜¯| F[è‡ªå‹•åˆä½µ]
    E -->|å¦| G[æ‰‹å‹•ä¿®å¾©]
    F --> H[é©—è­‰ä¿®å¾©]
    G --> H
    H --> I[é—œé–‰ Issue]
```

**è™•ç†æ™‚é™**: 4 å°æ™‚

### High æ¼æ´è™•ç†

```mermaid
graph TD
    A[æª¢æ¸¬åˆ° High æ¼æ´] --> B[Dependabot å»ºç«‹ PR]
    B --> C[é€šçŸ¥é–‹ç™¼åœ˜éšŠ]
    C --> D[ä»£ç¢¼å¯©æŸ¥]
    D --> E{é€šéå¯©æŸ¥?}
    E -->|æ˜¯| F[åˆä½µ PR]
    E -->|å¦| G[è¦æ±‚ä¿®æ”¹]
    G --> D
    F --> H[é©—è­‰ä¿®å¾©]
```

**è™•ç†æ™‚é™**: 24 å°æ™‚

### Moderate/Low æ¼æ´è™•ç†

- **Moderate**: æ’ç¨‹åœ¨ä¸‹ä¸€å€‹ Sprint è™•ç†
- **Low**: ç´å…¥ä¾‹è¡Œç¶­è­·é€±æœŸ

## æ¼æ´åˆ†æå·¥å…·

### VulnerabilityManager é¡åˆ¥

```python
from vulnerability_alert_handler import VulnerabilityManager

# åˆå§‹åŒ–
vm = VulnerabilityManager(token="your_token", org="your-org")

# å–å¾—å‘Šè­¦
alerts = vm.get_vulnerability_alerts(repo="your-repo")

# åˆ†é¡å‘Šè­¦
categorized = vm.categorize_alerts(alerts)

# å»ºç«‹ä¿®å¾©è¨ˆç•«
plan = vm.create_remediation_plan(categorized)

# ç”Ÿæˆå ±å‘Š
report = vm.generate_security_advisory(alerts)
```

### VulnerabilityAlert è³‡æ–™çµæ§‹

```python
@dataclass
class VulnerabilityAlert:
    id: str                    # å‘Šè­¦ ID
    severity: str              # åš´é‡åº¦
    package_name: str          # å¥—ä»¶åç¨±
    affected_version: str      # å—å½±éŸ¿ç‰ˆæœ¬
    fixed_version: str         # ä¿®å¾©ç‰ˆæœ¬
    cve_id: str               # CVE ç·¨è™Ÿ
    repository: str            # å€‰åº«åç¨±
    created_at: str           # å»ºç«‹æ™‚é–“
    manifest_path: str        # Manifest è·¯å¾‘
```

## æ•´åˆèˆ‡è‡ªå‹•åŒ–

### CI/CD æ•´åˆ

åœ¨æ‚¨çš„ CI/CD ç®¡é“ä¸­æ•´åˆæ¼æ´æª¢æŸ¥ï¼š

```yaml
# åœ¨éƒ¨ç½²å‰æª¢æŸ¥æ¼æ´
- name: Check Vulnerabilities
  run: |
    python3 scripts/vulnerability-alert-handler.py \
      --org ${{ github.repository_owner }} \
      --repo ${{ github.event.repository.name }} \
      --severity-threshold high \
      --output-format json
    
    # å¦‚æœæœ‰ critical æ¼æ´ï¼Œé˜»æ­¢éƒ¨ç½²
    CRITICAL=$(jq '.critical_immediate.count // 0' vulnerability-analysis.json)
    if [ $CRITICAL -gt 0 ]; then
      echo "âŒ éƒ¨ç½²è¢«é˜»æ­¢: ç™¼ç¾ $CRITICAL å€‹ Critical æ¼æ´"
      exit 1
    fi
```

### Slack é€šçŸ¥æ•´åˆ

```bash
# ç™¼é€ Slack é€šçŸ¥
curl -X POST $SLACK_WEBHOOK_URL \
  -H 'Content-Type: application/json' \
  -d '{
    "text": "ğŸš¨ Critical Security Alert",
    "blocks": [
      {
        "type": "section",
        "text": {
          "type": "mrkdwn",
          "text": "*'$CRITICAL_COUNT'* critical vulnerabilities detected"
        }
      }
    ]
  }'
```

### Jira æ•´åˆ

```python
# ç‚º Critical æ¼æ´å»ºç«‹ Jira ticket
import requests

def create_jira_ticket(alert):
    jira_api = "https://your-jira.atlassian.net/rest/api/2/issue"
    
    data = {
        "fields": {
            "project": {"key": "SEC"},
            "summary": f"[Security] {alert.package_name} - {alert.cve_id}",
            "description": f"Critical vulnerability in {alert.package_name}",
            "issuetype": {"name": "Bug"},
            "priority": {"name": "Highest"}
        }
    }
    
    response = requests.post(jira_api, json=data, auth=(user, token))
    return response.json()
```

## æœ€ä½³å¯¦è¸

### 1. SLA ç®¡ç†

å»ºç«‹æ˜ç¢ºçš„ SLA ç›®æ¨™ï¼š

```yaml
sla_targets:
  critical:
    response_time: 1 hour
    resolution_time: 4 hours
  high:
    response_time: 4 hours
    resolution_time: 24 hours
  moderate:
    response_time: 24 hours
    resolution_time: 1 week
  low:
    response_time: 1 week
    resolution_time: 1 month
```

### 2. æ¸¬è©¦ç­–ç•¥

åœ¨ä¿®å¾©æ¼æ´å‰å¾Œé€²è¡Œå……åˆ†æ¸¬è©¦ï¼š

```bash
# ä¿®å¾©å‰
npm test
npm run e2e

# æ‡‰ç”¨ä¿®å¾©
npm update vulnerable-package

# ä¿®å¾©å¾Œ
npm test
npm run e2e

# æ•ˆèƒ½æ¸¬è©¦
npm run performance-test
```

### 3. å›æ»¾è¨ˆç•«

ç‚ºæ¯å€‹ä¿®å¾©æº–å‚™å›æ»¾è¨ˆç•«ï¼š

```bash
# è¨˜éŒ„ç•¶å‰ç‰ˆæœ¬
git tag pre-security-fix-$(date +%Y%m%d)

# å¦‚éœ€å›æ»¾
git revert <commit-sha>
git push origin main
```

### 4. æºé€šå”èª¿

å»ºç«‹æ¸…æ™°çš„æºé€šæµç¨‹ï¼š

1. **ç™¼ç¾éšæ®µ**: è‡ªå‹•é€šçŸ¥ç›¸é—œåœ˜éšŠ
2. **åˆ†æéšæ®µ**: å®‰å…¨åœ˜éšŠè©•ä¼°å½±éŸ¿
3. **ä¿®å¾©éšæ®µ**: é–‹ç™¼åœ˜éšŠå¯¦æ–½ä¿®å¾©
4. **é©—è­‰éšæ®µ**: QA åœ˜éšŠé©—è­‰ä¿®å¾©
5. **éƒ¨ç½²éšæ®µ**: DevOps åœ˜éšŠéƒ¨ç½²åˆ°ç”Ÿç”¢

## ç›£æ§èˆ‡å ±å‘Š

### é—œéµæŒ‡æ¨™

è¿½è¹¤ä»¥ä¸‹ KPIï¼š

- **MTTD** (Mean Time To Detect): å¹³å‡æª¢æ¸¬æ™‚é–“
- **MTTR** (Mean Time To Remediate): å¹³å‡ä¿®å¾©æ™‚é–“
- **ä¿®å¾©ç‡**: å·²ä¿®å¾© / ç¸½æ¼æ´æ•¸
- **SLA é”æˆç‡**: åœ¨ SLA å…§ä¿®å¾©çš„ç™¾åˆ†æ¯”
- **é‡é–‹ç‡**: ä¿®å¾©å¾Œé‡æ–°å‡ºç¾çš„æ¼æ´

### Dashboard å»ºè­°

å»ºè­°å»ºç«‹ä»¥ä¸‹ Dashboardï¼š

1. **æ¼æ´æ¦‚è¦½**
   - ç¸½æ¼æ´æ•¸é‡
   - æŒ‰åš´é‡åº¦åˆ†å¸ƒ
   - è¶¨å‹¢åœ–è¡¨

2. **ä¿®å¾©é€²åº¦**
   - é–‹æ”¾æ¼æ´
   - ä¿®å¾©ä¸­æ¼æ´
   - å·²ä¿®å¾©æ¼æ´

3. **SLA è¿½è¹¤**
   - è¶…é SLA çš„æ¼æ´
   - å¹³å‡ä¿®å¾©æ™‚é–“
   - SLA é”æˆç‡

4. **å¥—ä»¶å¥åº·åº¦**
   - æœ€å¸¸å‡ºç¾æ¼æ´çš„å¥—ä»¶
   - éæ™‚çš„ä¾è³´é …
   - å»ºè­°æ›´æ–°

### å ±å‘Šç¯„ä¾‹

å·¥å…·ç”Ÿæˆçš„å ±å‘ŠåŒ…å«ï¼š

```markdown
# æ¼æ´å®‰å…¨å»ºè­°å ±å‘Š

ç”Ÿæˆæ™‚é–“: 2025-11-22 10:00:00

## æ‘˜è¦çµ±è¨ˆ

ç¸½æ¼æ´æ•¸é‡: **25**

### ä¾åš´é‡åº¦åˆ†å¸ƒ

ğŸ”´ **CRITICAL**: 2
ğŸŸ  **HIGH**: 5
ğŸŸ¡ **MODERATE**: 10
ğŸŸ¢ **LOW**: 8

### å—å½±éŸ¿å¥—ä»¶ TOP 10

1. **lodash**: 3 å€‹æ¼æ´
2. **axios**: 2 å€‹æ¼æ´
3. **express**: 2 å€‹æ¼æ´
...

## ä¿®å¾©å»ºè­°

### ğŸš¨ ç«‹å³è¡Œå‹•é …ç›®ï¼ˆCriticalï¼‰

#### lodash
- **Repository**: org/repo
- **Manifest**: `package.json`
- **CVE**: CVE-2021-23337
- **ä¿®å¾©ç‰ˆæœ¬**: >= 4.17.21
- **å‘Šè­¦ ID**: #123
```

## ç–‘é›£æ’è§£

### å¸¸è¦‹å•é¡Œ

**Q: Dependabot æ²’æœ‰å»ºç«‹ PRï¼Ÿ**

A: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
1. Dependabot æ˜¯å¦å·²å•Ÿç”¨
2. æ˜¯å¦æœ‰æœ‰æ•ˆçš„ manifest æ–‡ä»¶
3. æª¢æŸ¥ Dependabot æ—¥èªŒ

```bash
gh api /repos/{owner}/{repo}/dependabot/alerts
```

**Q: è‡ªå‹•åˆä½µæ²’æœ‰è§¸ç™¼ï¼Ÿ**

A: ç¢ºèªï¼š
1. `auto_merge` åƒæ•¸è¨­ç‚º `true`
2. PR æ˜¯ patch æˆ– minor æ›´æ–°
3. CI æª¢æŸ¥å…¨éƒ¨é€šé
4. æœ‰è¶³å¤ çš„æ¬Šé™

**Q: å¦‚ä½•è™•ç†èª¤å ±ï¼Ÿ**

A: 
```bash
# åœ¨ GitHub UI ä¸­é—œé–‰å‘Šè­¦
# æˆ–ä½¿ç”¨ API
gh api --method PATCH \
  /repos/{owner}/{repo}/dependabot/alerts/{alert_number} \
  -f state=dismissed \
  -f dismissed_reason=inaccurate
```

### ç²å–æ”¯æ´

- æŸ¥é–± [Dependabot æ–‡æª”](https://docs.github.com/en/code-security/dependabot)
- è¯ç¹«å®‰å…¨åœ˜éšŠ
- é–‹å•Ÿ GitHub Issue

## ç›¸é—œè³‡æº

- [GitHub Dependabot æ–‡æª”](https://docs.github.com/en/code-security/dependabot)
- [CVE è³‡æ–™åº«](https://cve.mitre.org/)
- [National Vulnerability Database](https://nvd.nist.gov/)
- [OWASP Dependency Check](https://owasp.org/www-project-dependency-check/)

---

**æœ€å¾Œæ›´æ–°**: 2025-11-22  
**ç¶­è­·è€…**: SLASolve Security Team

# ============================================================================
# SENIOR AUTOMATION ARCHITECT & CODE INTELLIGENCE ENGINEER
# 企業級自動化代碼分析與修復系統 - 配置文件
# ============================================================================

version: "2.0.0"

metadata:
  name: "Automation Architect System"
  description: "企業級自動化代碼分析與修復系統"
  created_at: "2025-11-25"
  updated_at: "2025-11-25"
  author: "SLASolve Team"
  license: "MIT"

# ============================================================================
# 系統配置 System Configuration
# ============================================================================

system:
  enabled: true
  mode: "production"  # development, staging, production
  
  # 性能配置
  performance:
    max_workers: 8
    timeout: 300  # seconds
    max_concurrent_analyses: 10
    cache_enabled: true
    cache_ttl: 3600  # seconds
  
  # 資源限制
  resources:
    max_memory_mb: 2048
    max_cpu_percent: 80
    max_disk_gb: 100

# ============================================================================
# 多維度代碼分析配置 Multi-Dimensional Analysis
# ============================================================================

analysis:
  # 安全漏洞檢測
  security:
    enabled: true
    priority: "critical"
    tools:
      - name: "semgrep"
        enabled: true
        rules: "config/rules/security-semgrep.yml"
      - name: "snyk"
        enabled: true
        api_token_env: "SNYK_TOKEN"
      - name: "trivy"
        enabled: true
        severity: ["CRITICAL", "HIGH", "MEDIUM"]
    
    checks:
      - "owasp-top-10"
      - "sql-injection"
      - "xss"
      - "csrf"
      - "insecure-crypto"
      - "hardcoded-secrets"
      - "path-traversal"
      - "insecure-deserialization"
  
  # 代碼質量分析
  quality:
    enabled: true
    priority: "high"
    tools:
      - name: "sonarqube"
        enabled: true
        server_url_env: "SONAR_URL"
      - name: "pylint"
        enabled: true
        config: "config/rules/pylint.rc"
      - name: "eslint"
        enabled: true
        config: "config/rules/.eslintrc.json"
    
    metrics:
      cyclomatic_complexity:
        threshold: 10
        severity: "warning"
      code_duplication:
        threshold: 5  # percentage
        severity: "warning"
      function_length:
        threshold: 50  # lines
        severity: "info"
      documentation_coverage:
        threshold: 80  # percentage
        severity: "info"
  
  # 性能分析
  performance:
    enabled: true
    priority: "medium"
    tools:
      - name: "perf"
        enabled: true
      - name: "py-spy"
        enabled: true
      - name: "flamegraph"
        enabled: true
    
    targets:
      api_latency_p99_ms: 100
      throughput_req_per_sec: 10000
      memory_usage_mb: 500
      cpu_usage_percent: 80
    
    checks:
      - "time-complexity"
      - "space-complexity"
      - "memory-leaks"
      - "cpu-hotspots"
      - "io-bottlenecks"
      - "algorithm-efficiency"
  
  # 架構分析
  architecture:
    enabled: true
    priority: "medium"
    tools:
      - name: "neo4j"
        enabled: true
        connection_env: "NEO4J_URI"
      - name: "archunit"
        enabled: true
    
    validations:
      - "no-circular-dependencies"
      - "coupling-threshold"
      - "high-cohesion"
      - "clear-module-boundaries"
      - "microservices-boundaries"
  
  # 可維護性分析
  maintainability:
    enabled: true
    priority: "medium"
    
    scoring:
      readability: 100
      testability: 100
      extensibility: 100
      maintainability_index: 100
    
    debt_classification:
      high_priority: "immediate"
      medium_priority: "planned"
      low_priority: "monitor"
    
    thresholds:
      debt_ratio: 5  # percentage
      debt_density: 0.1  # per 1000 lines

# ============================================================================
# 自動修復配置 Auto-Repair Configuration
# ============================================================================

repair:
  enabled: true
  
  # 修復策略
  strategies:
    - name: "rule-based"
      enabled: true
      priority: 1
    - name: "ast-transformation"
      enabled: true
      priority: 2
    - name: "ml-optimization"
      enabled: false  # 需要額外配置
      priority: 3
    - name: "context-aware"
      enabled: true
      priority: 4
  
  # 修復規則
  rules:
    - name: "security-auto-fix"
      enabled: true
      scope: "security"
      auto_apply: false  # 需要人工審核
    
    - name: "style-auto-fix"
      enabled: true
      scope: "quality"
      auto_apply: true
    
    - name: "performance-optimization"
      enabled: true
      scope: "performance"
      auto_apply: false
    
    - name: "deprecated-code-cleanup"
      enabled: true
      scope: "quality"
      auto_apply: true
  
  # 驗證配置
  verification:
    enabled: true
    
    tests:
      - name: "unit-tests"
        enabled: true
        coverage_threshold: 85
      - name: "integration-tests"
        enabled: true
      - name: "performance-tests"
        enabled: true
      - name: "security-tests"
        enabled: true
      - name: "regression-tests"
        enabled: true
    
    success_criteria:
      test_pass_rate: 95
      performance_no_degradation: true
      security_score_improvement: 20

# ============================================================================
# 多語言治理框架 Multi-Language Governance
# ============================================================================

frameworks:
  # Framework 1: Popular Languages
  popular:
    enabled: true
    languages:
      - python
      - typescript
      - javascript
      - go
      - rust
    tools:
      python:
        - "pylint"
        - "black"
        - "mypy"
        - "bandit"
      typescript:
        - "eslint"
        - "prettier"
        - "tsc"
      go:
        - "golint"
        - "gofmt"
        - "go vet"
      rust:
        - "clippy"
        - "rustfmt"
  
  # Framework 2: Server-side Languages
  server_side:
    enabled: true
    languages:
      - java
      - csharp
      - nodejs
      - kotlin
      - scala
    tools:
      java:
        - "checkstyle"
        - "spotbugs"
        - "pmd"
      csharp:
        - "roslyn"
        - "stylecop"
  
  # Framework 3: Web Languages
  web:
    enabled: true
    languages:
      - javascript
      - typescript
      - html
      - css
    tools:
      - "eslint"
      - "stylelint"
      - "htmlhint"
  
  # Framework 4: Mobile Languages
  mobile:
    enabled: true
    languages:
      - swift
      - kotlin
      - dart
      - react_native
    tools:
      swift:
        - "swiftlint"
      kotlin:
        - "ktlint"
      dart:
        - "dartanalyzer"
  
  # Framework 5: Data Representation
  data_representation:
    enabled: true
    formats:
      - json
      - yaml
      - xml
      - protobuf
    tools:
      - "json-schema"
      - "yamllint"
      - "xmllint"
  
  # Framework 6: Other Languages
  other:
    enabled: true
    languages:
      - cpp
      - haskell
      - elixir
      - zig
    tools:
      cpp:
        - "cppcheck"
        - "clang-tidy"
      haskell:
        - "hlint"

# ============================================================================
# 應用場景配置 Application Scenarios
# ============================================================================

scenarios:
  # Scenario 1: 無人機系統
  drone_systems:
    enabled: true
    description: "無人機系統代碼質量保障"
    
    focus_areas:
      - "real-time-flight-control"
      - "sensor-data-processing"
      - "communication-protocols"
      - "real-time-performance"
      - "safety-critical-validation"
    
    languages:
      primary: "cpp"
      secondary: ["python", "yaml"]
    
    analysis_priority:
      security: "critical"
      performance: "critical"
      quality: "high"
      architecture: "medium"
  
  # Scenario 2: 無人駕駛
  autonomous_driving:
    enabled: true
    description: "自動駕駛決策系統質量保障"
    
    focus_areas:
      - "decision-algorithms"
      - "sensor-fusion"
      - "path-planning"
      - "real-time-monitoring"
      - "safety-validation"
    
    languages:
      primary: "python"
      secondary: ["cpp", "go", "typescript"]
    
    analysis_priority:
      security: "critical"
      performance: "critical"
      quality: "high"
      architecture: "high"
  
  # Scenario 3: 自動化迭代
  automation_iteration:
    enabled: true
    description: "自動化工作流質量優化"
    
    focus_areas:
      - "automation-scripts"
      - "workflow-optimization"
      - "dependency-analysis"
      - "performance-bottlenecks"
      - "tech-debt-management"
    
    languages:
      primary: "python"
      secondary: ["go", "javascript", "yaml"]
    
    analysis_priority:
      security: "high"
      performance: "medium"
      quality: "high"
      architecture: "medium"

# ============================================================================
# 監控與告警 Monitoring & Alerting
# ============================================================================

monitoring:
  enabled: true
  
  # 指標收集
  metrics:
    enabled: true
    collectors:
      - name: "prometheus"
        enabled: true
        port: 9090
      - name: "grafana"
        enabled: true
        port: 3000
    
    metrics_list:
      - "analysis_duration_seconds"
      - "repair_success_rate"
      - "security_issues_detected"
      - "performance_improvements"
      - "code_quality_score"
  
  # 日誌配置
  logging:
    enabled: true
    level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
    format: "json"
    outputs:
      - type: "console"
        enabled: true
      - type: "file"
        enabled: true
        path: "logs/automation-architect.log"
      - type: "elk"
        enabled: false
        host_env: "ELK_HOST"
  
  # 告警配置
  alerting:
    enabled: true
    channels:
      - type: "email"
        enabled: true
        recipients_env: "ALERT_EMAILS"
      - type: "slack"
        enabled: true
        webhook_env: "SLACK_WEBHOOK"
      - type: "pagerduty"
        enabled: false
        api_key_env: "PAGERDUTY_KEY"
    
    rules:
      - name: "high-severity-security-issue"
        condition: "security_issues.severity == CRITICAL"
        channels: ["email", "slack"]
      - name: "system-overload"
        condition: "cpu_usage > 90"
        channels: ["email"]
      - name: "analysis-failure"
        condition: "analysis_failure_rate > 5"
        channels: ["slack"]

# ============================================================================
# CI/CD 集成 CI/CD Integration
# ============================================================================

cicd:
  enabled: true
  
  # GitHub Actions
  github_actions:
    enabled: true
    workflows:
      - name: "code-analysis"
        trigger: ["push", "pull_request"]
        jobs:
          - "static-analysis"
          - "security-scan"
          - "performance-test"
      
      - name: "auto-fix"
        trigger: ["schedule"]
        schedule: "0 2 * * *"  # Daily at 2 AM
  
  # GitLab CI
  gitlab_ci:
    enabled: false
  
  # Jenkins
  jenkins:
    enabled: false

# ============================================================================
# 部署配置 Deployment Configuration
# ============================================================================

deployment:
  # Docker
  docker:
    enabled: true
    image: "slasolve/automation-architect"
    tag: "latest"
    registry: "docker.io"
  
  # Kubernetes
  kubernetes:
    enabled: false
    namespace: "automation-architect"
    replicas: 3
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "2000m"
        memory: "4Gi"
  
  # 環境變量
  environment:
    - name: "ENVIRONMENT"
      value: "production"
    - name: "LOG_LEVEL"
      value: "INFO"

# ============================================================================
# 安全配置 Security Configuration
# ============================================================================

security:
  # 認證
  authentication:
    enabled: true
    type: "jwt"  # jwt, oauth2, basic
    token_expiry: 3600  # seconds
  
  # 授權
  authorization:
    enabled: true
    type: "rbac"  # rbac, acl
    
    roles:
      - name: "admin"
        permissions: ["*"]
      - name: "developer"
        permissions: ["read", "analyze"]
      - name: "viewer"
        permissions: ["read"]
  
  # 加密
  encryption:
    enabled: true
    algorithm: "AES-256-GCM"
    tls_version: "1.3"
  
  # 審計
  audit:
    enabled: true
    log_all_operations: true
    retention_days: 90

# ============================================================================
# 質量指標 Quality Metrics
# ============================================================================

quality_metrics:
  # 代碼質量評分
  code_quality_score:
    weights:
      security: 0.30
      maintainability: 0.30
      performance: 0.20
      testability: 0.20
    
    thresholds:
      excellent: 90
      good: 75
      acceptable: 60
      poor: 0
  
  # 技術債務
  technical_debt:
    max_debt_ratio: 5  # percentage
    max_debt_density: 0.1  # per 1000 lines
    
    priority_thresholds:
      high: "immediate"
      medium: "30_days"
      low: "90_days"

# ============================================================================
# 擴展配置 Extension Configuration
# ============================================================================

extensions:
  # 自定義分析器
  custom_analyzers:
    enabled: true
    path: "extensions/analyzers"
  
  # 自定義修復規則
  custom_rules:
    enabled: true
    path: "extensions/rules"
  
  # 插件系統
  plugins:
    enabled: true
    path: "extensions/plugins"

# 基線政策配置
# 定義專案級別的治理基準

version: "1.0"

# 命名規範
naming:
  enabled: true
  rules:
    namespace-pattern: "^(team|tenant|feature)-[a-z0-9-]+$"
    service-pattern: "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
    max-length: 63
    required-labels:
      - "namespace.io/team"
      - "namespace.io/environment"
      - "namespace.io/lifecycle"

# 目錄結構規範
directory-structure:
  enabled: true
  required-files:
    root:
      - "package.json"
      - "README.md"
      - "CONTRIBUTING.md"
    sub-projects:
      - "package.json"
      - "README.md"
  required-directories:
    - ".github/workflows"
    - "docs"
    - ".governance"

# 腳本命名規範
script-naming:
  enabled: true
  required-scripts:
    - "lint"
    - "test"
    - "build"
  recommended-scripts:
    - "typecheck"
    - "clean"
    - "dev"

# 分支與 PR 規範
git-workflow:
  enabled: true
  branch-protection:
    main:
      required-reviews: 1
      dismiss-stale-reviews: true
      require-status-checks: true
      required-checks:
        - "ci-pipeline"
        - "conftest-check"
  commit-message:
    pattern: "^(feat|fix|docs|style|refactor|perf|test|chore)(\\(.+\\))?: .{1,80}"
    require-signed-commits: false

# 審查門檻
review-thresholds:
  code-coverage:
    minimum: 80
    critical-paths: 100
  security:
    vulnerability-severity:
      critical: 0
      high: 0
      moderate: 5
  performance:
    bundle-size-increase: 10 # percentage
    response-time-degradation: 20 # percentage

# 供應鏈安全
supply-chain:
  sbom:
    required: true
    format: "CycloneDX"
  signature:
    required-for-production: true
    tool: "cosign"
  provenance:
    slsa-level: 2
    required-for-production: true

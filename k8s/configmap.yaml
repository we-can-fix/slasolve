# ============================================================================
# ConfigMap - Application Configuration
# ============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: autofix-bot-config
  namespace: autofix-bot
data:
  # System Configuration
  LOG_LEVEL: "INFO"
  ENVIRONMENT: "production"
  
  # Database Configuration
  DB_HOST: "postgres-service"
  DB_PORT: "5432"
  DB_NAME: "autofix_bot"
  DB_MAX_CONNECTIONS: "100"
  
  # Redis Configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_MAX_CONNECTIONS: "50"
  
  # Service Ports
  CODE_ANALYZER_PORT: "8080"
  VULNERABILITY_DETECTOR_PORT: "8081"
  AUTO_REPAIR_PORT: "8082"
  ORCHESTRATOR_PORT: "8083"
  
  # Analysis Configuration
  ANALYSIS_TIMEOUT: "300"
  ANALYSIS_MAX_WORKERS: "16"
  ANALYSIS_BATCH_SIZE: "100"
  
  # Repair Configuration
  REPAIR_TIMEOUT: "300"
  REPAIR_MAX_RETRIES: "3"
  REPAIR_AUTO_APPLY: "false"
  
  # Monitoring Configuration
  METRICS_ENABLED: "true"
  METRICS_PORT: "9090"
  HEALTH_CHECK_INTERVAL: "30"
  
  # SLSA Configuration
  SLSA_LEVEL: "3"
  EVIDENCE_HASH_ALGORITHM: "SHA256"
  
  # Prometheus Configuration
  prometheus.yml: |
    global:
      scrape_interval: 15s
      evaluation_interval: 15s
    scrape_configs:
      - job_name: 'code-analyzer'
        static_configs:
          - targets: ['code-analyzer:9090']
      - job_name: 'vulnerability-detector'
        static_configs:
          - targets: ['vulnerability-detector:9090']
      - job_name: 'auto-repair'
        static_configs:
          - targets: ['auto-repair:9090']
      - job_name: 'orchestrator'
        static_configs:
          - targets: ['orchestrator:9090']
